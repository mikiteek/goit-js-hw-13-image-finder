{"version":3,"sources":["webpack:///./js/search-options.js","webpack:///./js/fetchQuery.js","webpack:///./js/refs.js","webpack:///./js/components/spinner.js","webpack:///./js/update-images-markup.js","webpack:///./index.js","webpack:///./templates/images.hbs"],"names":["SEARCH_OPTIONS","API_KEY","BASE_URL","PER_PAGE","IMAGE_TYPE","ORIENTATION","searchQuery","page","fetchImages","url","searchOpt","this","query","fetch","then","res","json","hits","incrementPage","resetPage","value","getUrl","refs","document","querySelector","imagesUl","loadMore","searchForm","spinner","modal","largeImg","hideSpinner","classList","add","showSpinner","remove","updateImagesMarkup","articles","markup","imagesTemplate","insertAdjacentHTML","throttle","require","instance","basicLightbox","throttleLoadMore","images","window","pageYOffset","innerHeight","offsetHeight","handleSpinner","fetchQuery","scrollTo","top","documentElement","behavior","addEventListener","onGalleryClick","event","img","target","imageRef","nodeName","show","alt","src","dataset","source","preventDefault","form","currentTarget","elements","innerHTML","reset","Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop"],"mappings":"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","file":"main.36cc1cfad8386e933b9d.js","sourcesContent":["const SEARCH_OPTIONS = {\n  API_KEY: \"17739956-bd5b1f13e46aad2b0c362606a\",\n  BASE_URL: \"https://pixabay.com/api/\",\n  PER_PAGE: 12,\n  IMAGE_TYPE: \"photo\",\n  ORIENTATION: \"horizontal\",\n}\nexport default SEARCH_OPTIONS;\n","import searchOpt from './search-options';\n\nexport default {\n  searchQuery: '',\n  page: 1,\n  fetchImages() {\n    const url = `${searchOpt.BASE_URL}?image_type=${searchOpt.IMAGE_TYPE}&orientation=${searchOpt.ORIENTATION}&q=${this.query}&page=${this.page}&per_page=${searchOpt.PER_PAGE}&key=${searchOpt.API_KEY}`;\n    return fetch(url)\n      .then(res => res.json())\n      .then(({ hits }) => {\n        this.incrementPage();\n\n        return hits;\n      });\n  },\n  resetPage() {\n    this.page = 1;\n  },\n  incrementPage() {\n    this.page += 1;\n  },\n  get query() {\n    return this.searchQuery;\n  },\n  set query(value) {\n    this.searchQuery = value;\n  },\n  getUrl() {\n    return `${searchOpt.BASE_URL}?image_type=${searchOpt.IMAGE_TYPE}&orientation=${searchOpt.ORIENTATION}&q=${this.query}&page=${this.page}&per_page=${searchOpt.PER_PAGE}&key=${searchOpt.API_KEY}`;\n  }\n};\n\n","const refs = {\n  searchQuery: document.querySelector(\".search-form__input\"),\n  imagesUl: document.querySelector(\".gallery\"),\n  loadMore: document.querySelector(\".load-more\"),\n  searchForm: document.querySelector(\".search-form\"),\n  spinner: document.querySelector(\".js-spinner\"),\n  modal: document.querySelector(\"#modal\"),\n  largeImg: document.querySelector(\".lightbox__img\"),\n}\n\nexport default refs;\n","import refs from \"../refs\";\nfunction showSpinner() {\n  refs.spinner.classList.remove(\"js-is-hidden\");\n}\n\nfunction hideSpinner() {\n  refs.spinner.classList.add(\"js-is-hidden\");\n}\n\nexport default {\n  hideSpinner,\n  showSpinner\n}\n","import imagesTemplate from '../templates/images.hbs';\nimport refs from './refs';\n\nfunction updateImagesMarkup(articles) {\n  const markup = imagesTemplate(articles);\n  refs.imagesUl.insertAdjacentHTML('beforeend', markup);\n}\n\nexport default updateImagesMarkup;\n","import fetchQuery from './js/fetchQuery';\nimport refs from \"./js/refs\"\n// import LoadMoreBtn from \"./js/components/load-more-btn\";\nimport handleSpinner from \"./js/components/spinner\";\nconst throttle = require(\"lodash.throttle\");\nimport updateImagesMarkup from \"./js/update-images-markup\"\nimport * as basicLightbox from 'basiclightbox';\nimport \"basiclightbox/dist/basicLightbox.min.css\";\nimport './sass/styles.scss';\n\nconst instance = basicLightbox.create(refs.modal);\n// const loadMoreBtn = new LoadMoreBtn({\n//   selector: \".load-more\",\n//   hidden: true,\n// });\n\nconst throttleLoadMore = throttle(loadMore, 500);\nrefs.searchForm.addEventListener('submit', searchFormSubmitHandler);\nwindow.addEventListener(\"scroll\", throttleLoadMore);\n// loadMoreBtn.refs.button.addEventListener('click', fetchImages);\n\nfunction searchFormSubmitHandler(event) {\n  event.preventDefault();\n  const form = event.currentTarget;\n  fetchQuery.query = form.elements.query.value;\n\n  clearImages();\n  fetchQuery.resetPage();\n  fetchImages();\n  form.reset();\n}\nfunction fetchImages() {\n  handleSpinner.showSpinner();\n  // loadMoreBtn.disable();\n  fetchQuery.fetchImages().then(images => {\n    updateImagesMarkup(images);\n    windowSchrollTo();\n    refs.imagesUl.addEventListener(\"click\", onGalleryClick);\n    // loadMoreBtn.show();\n    // loadMoreBtn.enable();\n  });\n  handleSpinner.hideSpinner();\n}\nfunction clearImages() {\n  refs.imagesUl.innerHTML = '';\n}\n\nfunction loadMore() {\n  const images = refs.imagesUl;\n  if(window.pageYOffset + window.innerHeight >= images.offsetHeight) {\n    fetchImages();\n  }\n}\nfunction windowSchrollTo() {\n  window.scrollTo({\n    top: document.documentElement.offsetHeight - 320,\n    behavior: \"smooth\"\n  })\n}\n\n\nfunction onGalleryClick(event) {\n  const img = event.target;\n  if (img.nodeName !== \"IMG\") {\n    return;\n  }\n  instance.show();\n  refs.largeImg = document.querySelector(\".lightbox__img\");\n  setLargeImage(img);\n}\n\nfunction setLargeImage(imageRef) {\n  refs.largeImg.alt = imageRef.alt;\n  refs.largeImg.src = imageRef.dataset.source;\n}\n// function clearAttribute() {\n//   refs.largeImg.alt = \"\";\n//   refs.largeImg.src = \"\";\n// }","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"  <div class=\\\"photo-card\\\">\\n    <img class=\\\"photo-card__image\\\" src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":40},\"end\":{\"line\":3,\"column\":56}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"tags\") || (depth0 != null ? lookupProperty(depth0,\"tags\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tags\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":63},\"end\":{\"line\":3,\"column\":71}}}) : helper)))\n    + \"\\\" width=\\\"320\\\" data-source=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":98},\"end\":{\"line\":3,\"column\":115}}}) : helper)))\n    + \"\\\"/>\\n\\n    <div class=\\\"stats\\\">\\n      <p class=\\\"stats-item\\\">\\n        <i class=\\\"material-icons\\\">thumb_up</i>\\n        \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":8},\"end\":{\"line\":8,\"column\":17}}}) : helper)))\n    + \"\\n      </p>\\n      <p class=\\\"stats-item\\\">\\n        <i class=\\\"material-icons\\\">visibility</i>\\n        \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":8},\"end\":{\"line\":12,\"column\":17}}}) : helper)))\n    + \"\\n      </p>\\n      <p class=\\\"stats-item\\\">\\n        <i class=\\\"material-icons\\\">comment</i>\\n        \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":8},\"end\":{\"line\":16,\"column\":20}}}) : helper)))\n    + \"\\n      </p>\\n      <p class=\\\"stats-item\\\">\\n        <i class=\\\"material-icons\\\">cloud_download</i>\\n        \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":8},\"end\":{\"line\":20,\"column\":21}}}) : helper)))\n    + \"\\n      </p>\\n    </div>\\n  </div>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":24,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}